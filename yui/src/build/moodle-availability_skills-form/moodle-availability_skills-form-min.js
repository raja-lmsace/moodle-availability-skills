YUI.add("moodle-availability_skills-form",function(u,e){M.availability_skills=M.availability_skills||{},M.availability_skills.form=u.Object(M.core_availability.plugin),M.availability_skills.form.initInner=function(e,l){this.skills=e,this.contextID=l},M.availability_skills.form.getNode=function(t){var l,i,a,s,n,e;function o(e,l){return l=l||"availability_skills",M.util.get_string(e,l)}function c(l){["4","5","6"].find(function(e){return e==l})?(s.one("select[name=level]").hide(),s.one("input[name=points]").show()):(s.one("input[name=points]").hide(),s.one("select[name=level]").show())}function p(a,s,n,o){return new Promise(function(t,i){require(["core/fragment"],function(e){var l={skill:a},l=e.loadFragment("availability_skills","load_skill_levels",n,l);l.then(function(e,l){s.set("innerHTML",e||o),t(!0)})["catch"](i)})})}return l=this.contextID,i='<span class="col-form-label pr-3"> '+o("title")+'</span><span class="availability-group form-group"><label> <span class="accesshide">'+o("chooseskill")+'</span><select class="custom-select" name="skills" title="'+o("chooseskill")+'"><option value="0">'+o("choosedots","moodle")+"</option>",u.each(this.skills,function(e){i+='<option value="'+e.id+'">'+e.name+"</option>"}),i+='</select></label> <label> <span class="accesshide">'+o("choosetype")+' </span><select class="custom-select" name="ct" title="'+o("choosetype")+'"><option value="0">'+o("notinlevel")+'</option><option value="1">'+o("exactlevel")+'</option><option value="2">'+o("selectlevelorhigher")+'</option><option value="3">'+o("selectlevelorlower")+'</option><option value="4">'+o("exactpoints")+'</option><option value="5">'+o("moreorequalpoints")+'</option><option value="6">'+o("lesspoints")+"</option></select>",a='<option value="0">'+o("choosedots","moodle")+"</option>",i=(i+='<span class="accesshide">'+o("chooselevel")+'</span><select class="custom-select" name="level" title="'+o("chooselevel")+'">'+a+"</select></label> <br><br>")+('<span class="accesshide">'+o("points")+'</span><input name="points" type="text" class="form-control" style="width: 10em" title="'+o("points")+'" placeholder="'+o("points")+'" /></label></span>'),s=u.Node.create('<span class="form-inline">'+i+"</span>"),t.skill!==undefined&&s.one("select[name=skills] > option[value="+t.skill+"]")&&s.one("select[name=skills]").set("value",""+t.skill),t.ct!==undefined&&s.one("select[name=ct]").set("value",""+t.ct),t.points!==undefined&&s.one("input[name=points]").set("value",t.points),c((e=s.one("select[name=ct]")).get("value")),e.on("change",function(e){c(e.target.get("value"))}),e=s.one("select[name=skills]"),n=s.one("select[name=level]"),p(e.get("value"),n,l,a).then(function(){var e,l;e=s,(l=t.level)!==undefined&&e.one("select[name=level]").set("value",l)})["catch"](),e.on("change",function(e){p(e.target.get("value"),n,l,a)}),M.availability_skills.form.addedEvents||(M.availability_skills.form.addedEvents=!0,(e=u.one(".availability-field")).delegate("change",function(){M.core_availability.form.update()},".availability_skills select"),e.delegate("valuechange",function(){M.core_availability.form.update()},".availability_skills input[name=points]")),s},M.availability_skills.form.fillValue=function(e,l){e.skill=parseInt(l.one("select[name=skills]").get("value"),10),e.ct=parseInt(l.one("select[name=ct]").get("value"),10),e.points=parseInt(l.one("input[name=points]").get("value"),10),e.level=parseInt(l.one("select[name=level]").get("value"),0)},M.availability_skills.form.fillErrors=function(e,l){0===parseInt(l.one("select[name=skills]").get("value"),10)&&e.push("availability_skills:error_select_skill_id")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});